<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="980px" preserveAspectRatio="none" style="width:1906px;height:980px;background:#FFFFFF;" version="1.1" viewBox="0 0 1906 980" width="1906px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="777.625" style="stroke:#181818;stroke-width:1.0;" width="10" x="59.5" y="96.2188"/><rect fill="#FFFFFF" height="60.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="697.5" y="209.625"/><rect fill="#FFFFFF" height="260.6484" style="stroke:#181818;stroke-width:1.0;" width="10" x="697.5" y="300.6797"/><rect fill="#FFFFFF" height="60.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="1003.5" y="652.3828"/><rect fill="#FFFFFF" height="130.4063" style="stroke:#181818;stroke-width:1.0;" width="10" x="1003.5" y="743.4375"/><rect fill="none" height="155.5938" style="stroke:#000000;stroke-width:1.5;" width="1545" x="10" y="346.0313"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="64" x2="64" y1="86.2188" y2="882.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="535" x2="535" y1="86.2188" y2="882.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="702" x2="702" y1="86.2188" y2="882.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1008.5" x2="1008.5" y1="86.2188" y2="882.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1473" x2="1473" y1="86.2188" y2="882.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1641" x2="1641" y1="86.2188" y2="882.8438"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1821" x2="1821" y1="86.2188" y2="882.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="20" y="83.1426">Administrator</text><ellipse cx="64.5" cy="17.1094" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M64.5,25.1094 L64.5,52.1094 M51.5,33.1094 L77.5,33.1094 M64.5,52.1094 L51.5,67.1094 M64.5,52.1094 L77.5,67.1094 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="20" y="896.377">Administrator</text><ellipse cx="64.5" cy="907.9531" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M64.5,915.9531 L64.5,942.9531 M51.5,923.9531 L77.5,923.9531 M64.5,942.9531 L51.5,957.9531 M64.5,942.9531 L77.5,957.9531 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="481" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="95" x="488" y="57.5332">«presentation»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="502.5" y="75.1426">AddUserUI</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="481" y="881.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="95" x="488" y="903.377">«presentation»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="502.5" y="920.9863">AddUserUI</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131" x="637" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="660.5" y="57.5332">«application»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="644" y="75.1426">ShowRolesService</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="131" x="637" y="881.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="660.5" y="903.377">«application»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="644" y="920.9863">ShowRolesService</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="943.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="966.5" y="57.5332">«application»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="950.5" y="75.1426">AddUserController</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="943.5" y="881.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="966.5" y="903.377">«application»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="950.5" y="920.9863">AddUserController</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143" x="1402" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="60" x="1443.5" y="57.5332">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="1409" y="75.1426">AuthorizationService</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143" x="1402" y="881.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="60" x="1443.5" y="903.377">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="1409" y="920.9863">AuthorizationService</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172" x="1555" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="60" x="1611" y="57.5332">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="1562" y="75.1426">UserManagementService</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172" x="1555" y="881.8438"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="60" x="1611" y="903.377">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="1562" y="920.9863">UserManagementService</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="89" x="1773.5" y="65.5332">«persistence»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="1737" y="83.1426">ELearningUserRepository</text><path d="M1803,15 C1803,5 1821,5 1821,5 C1821,5 1839,5 1839,15 L1839,41 C1839,51 1821,51 1821,51 C1821,51 1803,51 1803,41 L1803,15 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1803,15 C1803,25 1821,25 1821,25 C1821,25 1839,25 1839,15 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="89" x="1773.5" y="896.377">«persistence»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="1737" y="913.9863">ELearningUserRepository</text><path d="M1803,927.0625 C1803,917.0625 1821,917.0625 1821,917.0625 C1821,917.0625 1839,917.0625 1839,927.0625 L1839,953.0625 C1839,963.0625 1821,963.0625 1821,963.0625 C1821,963.0625 1803,963.0625 1803,953.0625 L1803,927.0625 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1803,927.0625 C1803,937.0625 1821,937.0625 1821,937.0625 C1821,937.0625 1839,937.0625 1839,927.0625 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#FFFFFF" height="777.625" style="stroke:#181818;stroke-width:1.0;" width="10" x="59.5" y="96.2188"/><rect fill="#FFFFFF" height="60.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="697.5" y="209.625"/><rect fill="#FFFFFF" height="260.6484" style="stroke:#181818;stroke-width:1.0;" width="10" x="697.5" y="300.6797"/><rect fill="#FFFFFF" height="60.7031" style="stroke:#181818;stroke-width:1.0;" width="10" x="1003.5" y="652.3828"/><rect fill="#FFFFFF" height="130.4063" style="stroke:#181818;stroke-width:1.0;" width="10" x="1003.5" y="743.4375"/><polygon fill="#181818" points="523.5,114.5703,533.5,118.5703,523.5,122.5703,527.5,118.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="69.5" x2="529.5" y1="118.5703" y2="118.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="76.5" y="113.7139">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121" x="87.5" y="113.7139">requests to add User</text><polygon fill="#181818" points="80.5,144.9219,70.5,148.9219,80.5,152.9219,76.5,148.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="534.5" y1="148.9219" y2="148.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="86.5" y="144.0654">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="431" x="97.5" y="144.0654">asks for input data (Username, Password, First Name, Last Name, E-Mail)</text><polygon fill="#181818" points="523.5,175.2734,533.5,179.2734,523.5,183.2734,527.5,179.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="69.5" x2="529.5" y1="179.2734" y2="179.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="76.5" y="174.417">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="87.5" y="174.417">types input data</text><polygon fill="#181818" points="685.5,205.625,695.5,209.625,685.5,213.625,689.5,209.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="535.5" x2="691.5" y1="209.625" y2="209.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="542.5" y="204.7686">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="553.5" y="204.7686">creates</text><polygon fill="#181818" points="1809,235.9766,1819,239.9766,1809,243.9766,1813,239.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="707.5" x2="1815" y1="239.9766" y2="239.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="714.5" y="235.1201">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="725.5" y="235.1201">repositories()</text><polygon fill="#181818" points="1461.5,266.3281,1471.5,270.3281,1461.5,274.3281,1465.5,270.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="702.5" x2="1467.5" y1="270.3281" y2="270.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="709.5" y="265.4717">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="720.5" y="265.4717">authorizationService()</text><polygon fill="#181818" points="685.5,296.6797,695.5,300.6797,685.5,304.6797,689.5,300.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="535.5" x2="691.5" y1="300.6797" y2="300.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="542.5" y="295.8232">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="553.5" y="295.8232">show_roles()</text><polygon fill="#181818" points="1461.5,327.0313,1471.5,331.0313,1461.5,335.0313,1465.5,331.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="707.5" x2="1467.5" y1="331.0313" y2="331.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="714.5" y="326.1748">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="418" x="725.5" y="326.1748">ensureAuthenticatedUserHasAnyOf(ADMINISTRATOR, POWER_USER)</text><path d="M10,346.0313 L71,346.0313 L71,354.3828 L61,364.3828 L10,364.3828 L10,346.0313 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="155.5938" style="stroke:#000000;stroke-width:1.5;" width="1545" x="10" y="346.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="360.5264">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="180" x="86" y="359.4502">[user has insufficient privileges]</text><polygon fill="#181818" points="718.5,382.7344,708.5,386.7344,718.5,390.7344,714.5,386.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="712.5" x2="1472.5" y1="386.7344" y2="386.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="724.5" y="381.8779">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="735.5" y="381.8779">Insufficient Privileges</text><polygon fill="#181818" points="546.5,413.0859,536.5,417.0859,546.5,421.0859,542.5,417.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="540.5" x2="696.5" y1="417.0859" y2="417.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="552.5" y="412.2295">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="570.5" y="412.2295">Insufficient Privileges</text><polygon fill="#181818" points="80.5,443.4375,70.5,447.4375,80.5,451.4375,76.5,447.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="534.5" y1="447.4375" y2="447.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="86.5" y="442.5811">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="104.5" y="442.5811">Insufficient Privileges</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1555" y1="456.4375" y2="456.4375"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="170" x="15" y="467.8564">[user has sufficient privileges]</text><polygon fill="#181818" points="718.5,489.625,708.5,493.625,718.5,497.625,714.5,493.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="712.5" x2="1472.5" y1="493.625" y2="493.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="724.5" y="488.7686">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="742.5" y="488.7686">Sufficient Privileges</text><polygon fill="#181818" points="1809,526.9766,1819,530.9766,1809,534.9766,1813,530.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="707.5" x2="1815" y1="530.9766" y2="530.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="714.5" y="526.1201">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="73" x="732.5" y="526.1201">show_roles()</text><polygon fill="#181818" points="546.5,557.3281,536.5,561.3281,546.5,565.3281,542.5,561.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="540.5" x2="701.5" y1="561.3281" y2="561.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="552.5" y="556.4717">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="570.5" y="556.4717">List&lt;Role&gt;</text><polygon fill="#181818" points="80.5,587.6797,70.5,591.6797,80.5,595.6797,76.5,591.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="534.5" y1="591.6797" y2="591.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="86.5" y="586.8232">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="268" x="104.5" y="586.8232">show list of Roles and request to choose them</text><polygon fill="#181818" points="523.5,618.0313,533.5,622.0313,523.5,626.0313,527.5,622.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="69.5" x2="529.5" y1="622.0313" y2="622.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="76.5" y="617.1748">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="94.5" y="617.1748">selects roles</text><polygon fill="#181818" points="991.5,648.3828,1001.5,652.3828,991.5,656.3828,995.5,652.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="535.5" x2="997.5" y1="652.3828" y2="652.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="542.5" y="647.5264">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="560.5" y="647.5264">creates</text><polygon fill="#181818" points="1629,678.7344,1639,682.7344,1629,686.7344,1633,682.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1013.5" x2="1635" y1="682.7344" y2="682.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1020.5" y="677.8779">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="1038.5" y="677.8779">userService()</text><polygon fill="#181818" points="1461.5,709.0859,1471.5,713.0859,1461.5,717.0859,1465.5,713.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1008.5" x2="1467.5" y1="713.0859" y2="713.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1015.5" y="708.2295">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="1033.5" y="708.2295">authorizationService()</text><polygon fill="#181818" points="991.5,739.4375,1001.5,743.4375,991.5,747.4375,995.5,743.4375" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="535.5" x2="997.5" y1="743.4375" y2="743.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="542.5" y="738.5811">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="431" x="560.5" y="738.5811">addUser(username, password, firstName, lastName, email, selectedRoles)</text><polygon fill="#181818" points="1461.5,769.7891,1471.5,773.7891,1461.5,777.7891,1465.5,773.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1013.5" x2="1467.5" y1="773.7891" y2="773.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1020.5" y="768.9326">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="418" x="1038.5" y="768.9326">ensureAuthenticatedUserHasAnyOf(ADMINISTRATOR, POWER_USER)</text><polygon fill="#181818" points="1629,800.1406,1639,804.1406,1629,808.1406,1633,804.1406" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1013.5" x2="1635" y1="804.1406" y2="804.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1020.5" y="799.2842">22</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="471" x="1038.5" y="799.2842">registerNewUser(username, password, firstName, lastName, email, a, createdOn)</text><polygon fill="#181818" points="546.5,830.4922,536.5,834.4922,546.5,838.4922,542.5,834.4922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="540.5" x2="1002.5" y1="834.4922" y2="834.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="552.5" y="829.6357">23</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="570.5" y="829.6357">SystemUser user</text><polygon fill="#181818" points="80.5,860.8438,70.5,864.8438,80.5,868.8438,76.5,864.8438" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="74.5" x2="534.5" y1="864.8438" y2="864.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="86.5" y="859.9873">24</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="104.5" y="859.9873">informs about the success of the operation</text><!--MD5=[8ca88ba00040e79316cea3b36573e886]
@startuml
'https://plantuml.com/sequence-diagram
autonumber

actor Administrator as admin


participant AddUserUI as ui <<presentation>>
participant ShowRolesService as sr_ctrl <<application>>
participant AddUserController as au_ctrl <<application>>
participant AuthorizationService as authz <<service>>
participant UserManagementService as svc <<service>>

database ELearningUserRepository as ERepo <<persistence>>

activate admin
admin -> ui: requests to add User
ui - -> admin : asks for input data (Username, Password, First Name, Last Name, E-Mail)
admin -> ui : types input data

ui -> sr_ctrl : creates
activate sr_ctrl
sr_ctrl -> ERepo: repositories()
sr_ctrl -> authz: authorizationService()
deactivate sr_ctrl

ui -> sr_ctrl: show_roles()

activate sr_ctrl
sr_ctrl -> authz : ensureAuthenticatedUserHasAnyOf(ADMINISTRATOR, POWER_USER)

alt user has insufficient privileges
    authz -> sr_ctrl : Insufficient Privileges
    sr_ctrl - -> ui : Insufficient Privileges
    ui - -> admin : Insufficient Privileges
else user has sufficient privileges
    authz -> sr_ctrl : Sufficient Privileges
end
    sr_ctrl -> ERepo : show_roles()
    sr_ctrl -> ui : List<Role>

deactivate sr_ctrl
ui- -> admin : show list of Roles and request to choose them
admin->ui : selects roles

ui -> au_ctrl : creates

activate au_ctrl
au_ctrl -> svc: userService()
au_ctrl -> authz: authorizationService()
deactivate au_ctrl

ui -> au_ctrl: addUser(username, password, firstName, lastName, email, selectedRoles)

activate au_ctrl
au_ctrl -> authz : ensureAuthenticatedUserHasAnyOf(ADMINISTRATOR, POWER_USER)
au_ctrl -> svc : registerNewUser(username, password, firstName, lastName, email, a, createdOn)
au_ctrl -> ui: SystemUser user

ui- ->admin: informs about the success of the operation

@enduml

@startuml
autonumber

actor Administrator as admin


participant AddUserUI as ui <<presentation>>
participant ShowRolesService as sr_ctrl <<application>>
participant AddUserController as au_ctrl <<application>>
participant AuthorizationService as authz <<service>>
participant UserManagementService as svc <<service>>

database ELearningUserRepository as ERepo <<persistence>>

activate admin
admin -> ui: requests to add User
ui - -> admin : asks for input data (Username, Password, First Name, Last Name, E-Mail)
admin -> ui : types input data

ui -> sr_ctrl : creates
activate sr_ctrl
sr_ctrl -> ERepo: repositories()
sr_ctrl -> authz: authorizationService()
deactivate sr_ctrl

ui -> sr_ctrl: show_roles()

activate sr_ctrl
sr_ctrl -> authz : ensureAuthenticatedUserHasAnyOf(ADMINISTRATOR, POWER_USER)

alt user has insufficient privileges
    authz -> sr_ctrl : Insufficient Privileges
    sr_ctrl - -> ui : Insufficient Privileges
    ui - -> admin : Insufficient Privileges
else user has sufficient privileges
    authz -> sr_ctrl : Sufficient Privileges
end
    sr_ctrl -> ERepo : show_roles()
    sr_ctrl -> ui : List<Role>

deactivate sr_ctrl
ui- -> admin : show list of Roles and request to choose them
admin->ui : selects roles

ui -> au_ctrl : creates

activate au_ctrl
au_ctrl -> svc: userService()
au_ctrl -> authz: authorizationService()
deactivate au_ctrl

ui -> au_ctrl: addUser(username, password, firstName, lastName, email, selectedRoles)

activate au_ctrl
au_ctrl -> authz : ensureAuthenticatedUserHasAnyOf(ADMINISTRATOR, POWER_USER)
au_ctrl -> svc : registerNewUser(username, password, firstName, lastName, email, a, createdOn)
au_ctrl -> ui: SystemUser user

ui- ->admin: informs about the success of the operation

@enduml

PlantUML version 1.2022.12(Sun Oct 23 19:12:26 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>