<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="780px" preserveAspectRatio="none" style="width:1391px;height:780px;background:#FFFFFF;" version="1.1" viewBox="0 0 1391 780" width="1391px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="464.7578" style="stroke:#181818;stroke-width:1.0;" width="10" x="507.5" y="209.625"/><rect fill="#FFFFFF" height="104.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="1133" y="500.625"/><rect fill="none" height="155.5938" style="stroke:#000000;stroke-width:1.5;" width="1042" x="10" y="315.6797"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="64" x2="64" y1="86.2188" y2="683.3828"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="352.5" x2="352.5" y1="86.2188" y2="683.3828"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="512.5" x2="512.5" y1="86.2188" y2="683.3828"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="970" x2="970" y1="86.2188" y2="683.3828"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1138" x2="1138" y1="86.2188" y2="683.3828"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1338.5" x2="1338.5" y1="86.2188" y2="683.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="20" y="83.1426">Administrator</text><ellipse cx="64.5" cy="17.1094" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M64.5,25.1094 L64.5,52.1094 M51.5,33.1094 L77.5,33.1094 M64.5,52.1094 L51.5,67.1094 M64.5,52.1094 L77.5,67.1094 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="20" y="696.916">Administrator</text><ellipse cx="64.5" cy="708.4922" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M64.5,716.4922 L64.5,743.4922 M51.5,724.4922 L77.5,724.4922 M64.5,743.4922 L51.5,758.4922 M64.5,743.4922 L77.5,758.4922 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="291.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="95" x="305" y="57.5332">«presentation»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="298.5" y="75.1426">DeactivateUserUI</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="122" x="291.5" y="682.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="95" x="305" y="703.916">«presentation»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108" x="298.5" y="721.5254">DeactivateUserUI</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172" x="426.5" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="470.5" y="57.5332">«application»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="433.5" y="75.1426">DeactivateUserController</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172" x="426.5" y="682.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="84" x="470.5" y="703.916">«application»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="433.5" y="721.5254">DeactivateUserController</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143" x="899" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="60" x="940.5" y="57.5332">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="906" y="75.1426">AuthorizationService</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143" x="899" y="682.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="60" x="940.5" y="703.916">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="906" y="721.5254">AuthorizationService</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172" x="1052" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="60" x="1108" y="57.5332">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="1059" y="75.1426">UserManagementService</text><rect fill="#E2E2F0" height="49.2188" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172" x="1052" y="682.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="60" x="1108" y="703.916">«service»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158" x="1059" y="721.5254">UserManagementService</text><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="89" x="1291.5" y="65.5332">«persistence»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="1287.5" y="83.1426">UserRepository</text><path d="M1321,15 C1321,5 1339,5 1339,5 C1339,5 1357,5 1357,15 L1357,41 C1357,51 1339,51 1339,51 C1339,51 1321,51 1321,41 L1321,15 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1321,15 C1321,25 1339,25 1339,25 C1339,25 1357,25 1357,15 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="89" x="1291.5" y="696.916">«persistence»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="97" x="1287.5" y="714.5254">UserRepository</text><path d="M1321,727.6016 C1321,717.6016 1339,717.6016 1339,717.6016 C1339,717.6016 1357,717.6016 1357,727.6016 L1357,753.6016 C1357,763.6016 1339,763.6016 1339,763.6016 C1339,763.6016 1321,763.6016 1321,753.6016 L1321,727.6016 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1321,727.6016 C1321,737.6016 1339,737.6016 1339,737.6016 C1339,737.6016 1357,737.6016 1357,727.6016 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#FFFFFF" height="464.7578" style="stroke:#181818;stroke-width:1.0;" width="10" x="507.5" y="209.625"/><rect fill="#FFFFFF" height="104.0547" style="stroke:#181818;stroke-width:1.0;" width="10" x="1133" y="500.625"/><polygon fill="#181818" points="340.5,114.5703,350.5,118.5703,340.5,122.5703,344.5,118.5703" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="64.5" x2="346.5" y1="118.5703" y2="118.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="71.5" y="113.7139">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="82.5" y="113.7139">asks to deactivate a user</text><polygon fill="#181818" points="75.5,144.9219,65.5,148.9219,75.5,152.9219,71.5,148.9219" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="69.5" x2="351.5" y1="148.9219" y2="148.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="81.5" y="144.0654">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="92.5" y="144.0654">shows a list of users</text><polygon fill="#181818" points="340.5,175.2734,350.5,179.2734,340.5,183.2734,344.5,179.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="64.5" x2="346.5" y1="179.2734" y2="179.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="71.5" y="174.417">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="82.5" y="174.417">selects a user to deactivate</text><polygon fill="#181818" points="495.5,205.625,505.5,209.625,495.5,213.625,499.5,209.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352.5" x2="501.5" y1="209.625" y2="209.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="359.5" y="204.7686">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="370.5" y="204.7686">creates</text><polygon fill="#181818" points="958.5,235.9766,968.5,239.9766,958.5,243.9766,962.5,239.9766" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="517.5" x2="964.5" y1="239.9766" y2="239.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="524.5" y="235.1201">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="535.5" y="235.1201">authorizationService()</text><polygon fill="#181818" points="495.5,266.3281,505.5,270.3281,495.5,274.3281,499.5,270.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="352.5" x2="501.5" y1="270.3281" y2="270.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="359.5" y="265.4717">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="370.5" y="265.4717">deactivateUser(user)</text><polygon fill="#181818" points="958.5,296.6797,968.5,300.6797,958.5,304.6797,962.5,300.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="517.5" x2="964.5" y1="300.6797" y2="300.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="524.5" y="295.8232">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="418" x="535.5" y="295.8232">ensureAuthenticatedUserHasAnyOf(ADMINISTRATOR, POWER_USER)</text><path d="M10,315.6797 L71,315.6797 L71,324.0313 L61,334.0313 L10,334.0313 L10,315.6797 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="155.5938" style="stroke:#000000;stroke-width:1.5;" width="1042" x="10" y="315.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="330.1748">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="180" x="86" y="329.0986">[user has insufficient privileges]</text><polygon fill="#181818" points="528.5,352.3828,518.5,356.3828,528.5,360.3828,524.5,356.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="522.5" x2="969.5" y1="356.3828" y2="356.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="534.5" y="351.5264">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="545.5" y="351.5264">Insufficient Privileges</text><polygon fill="#181818" points="363.5,382.7344,353.5,386.7344,363.5,390.7344,359.5,386.7344" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="357.5" x2="506.5" y1="386.7344" y2="386.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="369.5" y="381.8779">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="380.5" y="381.8779">Insufficient Privileges</text><polygon fill="#181818" points="75.5,413.0859,65.5,417.0859,75.5,421.0859,71.5,417.0859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="69.5" x2="351.5" y1="417.0859" y2="417.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="81.5" y="412.2295">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="99.5" y="412.2295">Insufficient Privileges</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="1052" y1="426.0859" y2="426.0859"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="170" x="15" y="437.5049">[user has sufficient privileges]</text><polygon fill="#181818" points="528.5,459.2734,518.5,463.2734,528.5,467.2734,524.5,463.2734" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="522.5" x2="969.5" y1="463.2734" y2="463.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="534.5" y="458.417">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="552.5" y="458.417">Sufficient Privileges</text><polygon fill="#181818" points="1121,496.625,1131,500.625,1121,504.625,1125,500.625" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="517.5" x2="1127" y1="500.625" y2="500.625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="524.5" y="495.7686">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="542.5" y="495.7686">deactivateUser(user)</text><line style="stroke:#181818;stroke-width:1.0;" x1="1143" x2="1185" y1="530.9766" y2="530.9766"/><line style="stroke:#181818;stroke-width:1.0;" x1="1185" x2="1185" y1="530.9766" y2="543.9766"/><line style="stroke:#181818;stroke-width:1.0;" x1="1144" x2="1185" y1="543.9766" y2="543.9766"/><polygon fill="#181818" points="1154,539.9766,1144,543.9766,1154,547.9766,1150,543.9766" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1150" y="526.1201">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159" x="1168" y="526.1201">deactivate(Calendars.now())</text><polygon fill="#181818" points="1327,570.3281,1337,574.3281,1327,578.3281,1331,574.3281" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1143" x2="1333" y1="574.3281" y2="574.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="1150" y="569.4717">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="1168" y="569.4717">save(user)</text><polygon fill="#181818" points="528.5,600.6797,518.5,604.6797,528.5,608.6797,524.5,604.6797" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="522.5" x2="1137" y1="604.6797" y2="604.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="534.5" y="599.8232">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="552.5" y="599.8232">SystemUser user</text><polygon fill="#181818" points="363.5,631.0313,353.5,635.0313,363.5,639.0313,359.5,635.0313" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="357.5" x2="506.5" y1="635.0313" y2="635.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="369.5" y="630.1748">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="387.5" y="630.1748">SystemUser user</text><polygon fill="#181818" points="75.5,661.3828,65.5,665.3828,75.5,669.3828,71.5,665.3828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="69.5" x2="351.5" y1="665.3828" y2="665.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="81.5" y="660.5264">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="246" x="99.5" y="660.5264">informs about the success of the operation</text><!--MD5=[f64961297791472bc9f1e911b71d9aa3]
@startuml
'https://plantuml.com/sequence-diagram
autonumber

actor Administrator as admin

participant DeactivateUserUI as ui <<presentation>>
participant DeactivateUserController as du_ctrl <<application>>
participant AuthorizationService as authz <<service>>
participant UserManagementService as svc <<service>>

database UserRepository as repo <<persistence>>

admin->ui : asks to deactivate a user
ui- ->admin: shows a list of users
admin->ui: selects a user to deactivate
ui->du_ctrl: creates
activate du_ctrl
du_ctrl->authz:authorizationService()
ui->du_ctrl: deactivateUser(user)
du_ctrl -> authz: ensureAuthenticatedUserHasAnyOf(ADMINISTRATOR, POWER_USER)
alt user has insufficient privileges
    authz -> du_ctrl : Insufficient Privileges
    du_ctrl - -> ui : Insufficient Privileges
    ui - -> admin : Insufficient Privileges
else user has sufficient privileges
    authz -> du_ctrl : Sufficient Privileges
end


    du_ctrl->svc: deactivateUser(user)
    activate svc
    svc->svc: deactivate(Calendars.now())
    svc -> repo : save(user)
    svc -> du_ctrl: SystemUser user
    deactivate svc
   du_ctrl->ui:SystemUser user
    ui- ->admin: informs about the success of the operation
@enduml

@startuml
autonumber

actor Administrator as admin

participant DeactivateUserUI as ui <<presentation>>
participant DeactivateUserController as du_ctrl <<application>>
participant AuthorizationService as authz <<service>>
participant UserManagementService as svc <<service>>

database UserRepository as repo <<persistence>>

admin->ui : asks to deactivate a user
ui- ->admin: shows a list of users
admin->ui: selects a user to deactivate
ui->du_ctrl: creates
activate du_ctrl
du_ctrl->authz:authorizationService()
ui->du_ctrl: deactivateUser(user)
du_ctrl -> authz: ensureAuthenticatedUserHasAnyOf(ADMINISTRATOR, POWER_USER)
alt user has insufficient privileges
    authz -> du_ctrl : Insufficient Privileges
    du_ctrl - -> ui : Insufficient Privileges
    ui - -> admin : Insufficient Privileges
else user has sufficient privileges
    authz -> du_ctrl : Sufficient Privileges
end


    du_ctrl->svc: deactivateUser(user)
    activate svc
    svc->svc: deactivate(Calendars.now())
    svc -> repo : save(user)
    svc -> du_ctrl: SystemUser user
    deactivate svc
   du_ctrl->ui:SystemUser user
    ui- ->admin: informs about the success of the operation
@enduml

PlantUML version 1.2022.12(Sun Oct 23 19:12:26 BST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: en
Country: US
--></g></svg>